#coding=utf8
import unittest

from jnius import autoclass as Java
EncryptHandler = Java('cc.yun.util.Encrypt')
password = 'qweeee'

class TestJavaHandler(unittest.TestCase):

    def test_get_encrypt(self):
        xml = '<a>b</a>'
        encrypt = EncryptHandler.get_encrypt_by_password(xml, password)
        encrypt_known = 'CC7BCB7F69B7784BAF6A0B66B11263D7'
        self.assertEquals(encrypt, encrypt_known)

    def test_get_decrypt(self):
        encrypt = 'F4EA5AA5DDB4B96BE4038919D78A2E07'
        decrypt = EncryptHandler.get_decrypt_by_password(encrypt, password)
        decrypt_known = '<a>中文</a>'
        self.assertEquals(decrypt, decrypt_known)

    def test_case(self):
        encrypt = '70BC0DAC985ACA890EEE43344FC1EC2695CCFDD1DA014DD478D634A60C8E80D79C48C40587324B1D3991422B821B087F0A31AD4C91521FA968FCDC4C8203F335B241EA3AD5C948B20BFF8F2BDDF9908C74A4C7AEB909457114B72BD08BC2EBC1FC62F4F0DDE6CB02EA5D4C99EE0AE611ADA2C5A6D85D45056F2B0DF8BBFD0C0A3E32265C2A4264A2DCEDDFC3A4E2DF81FDDEBB80DB78B3023E243D52FD3FFA968045F0015E92D41DABBFE6DA204710E8D36E9B8C995B5A1DE66B33EACC4C33D8B99E8BDBAC945DEAE29DC5B3A040394D66CDD54CF7A86DBBA7765B129CE93E313DCA456F0C63C8BBC4A42567A35BA92D883BDD1473BF713DA553631FDA033A87A36497A9EB7946A5545C6D9F1AA3CC4F0021D60A702C6C4FE4918DCE715B7D182AF1BD8FE6112BB7F183229C2AAECA781E2CE47EC213F01030763FF353D8C37F61FADF74A01AC5545DBB08051B2F733792F14171307CB018D507913B80E5B46D03D19243DFA925EBE479BD170726E21437E87B5E58B95CA473FF1F85824BFEA6CD35C176C19E6007336E6665535CAD678F4194E423463477877534040D4D393C3552A78FCC4AA2CBE2934C2C117BA8C2BF960BAEBCE9E0C774D2820E5C3B16B4B262092899B0958A2D4B1B19136C29C369DA99821B64551BB228EE5426A0FBD9466116558B321C5F8A5ADE441C6D67B98923C0BF74FC1E6B4502A144D9444C272DDA38E8E840C810DBADB341ADE7EB43D2B9810C8FB9A76CE56138A034E0C2BC81EAD269821C3C7DE6F219BD885D0A46993ABA53FC2AC1963B6A7CA50EBAF3EBFA266D69C37E864EF6B7FFF60C97C8DE365EFF50FD80BDE054D7E514319BB7E50594589203CC426D70192AB4518723420C3142629E5989CC41D2A29A0B05E207E7D7326F06CD806DC4FD1F09722881676AA46CAB115B24DA38B84A012A668A26'
        decrypt = EncryptHandler.get_decrypt_by_password(encrypt, password)
        decrypt_known = '<?xml version="1.0" encoding="UTF-8"?><request><company>厂商标示</company><requestId>请求ID</requestId><Create><CreateHost><userId>用户ID</userId><transactionId>交易ID</transactionId><timestamp>时间戳</timestamp><core>CPU大小(个数) </core><memory>内存大小(MB)</memory><os>操作系统</os><groupName>安全组名称</groupName><hostSpecId>虚拟机规格ID</hostSpecId><path>镜像路径</path></CreateHost><CreateIp><transactionId>交易ID</transactionId><netSpeed>带宽大小(MB)</netSpeed><ip>传空值</ip></CreateIp ><CreateDisk><transactionId>交易ID</transactionId><disk>磁盘大小(GB)</disk></CreateDisk></Create></request>'
        self.assertEquals(decrypt, decrypt_known)


if __name__ == '__main__':
    unittest.main()
